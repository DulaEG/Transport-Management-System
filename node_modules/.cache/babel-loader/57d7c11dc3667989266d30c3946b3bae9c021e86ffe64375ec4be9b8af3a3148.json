{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dulas\\\\Desktop\\\\Transport-Management-System\\\\frontend\\\\src\\\\modules\\\\components\\\\AttendanceHistory.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Table, Button, ConfigProvider } from 'antd';\nimport axios from 'axios';\nimport { jsPDF } from 'jspdf';\nimport 'jspdf-autotable';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AttendanceHistory = () => {\n  _s();\n  const [attendance, setAttendance] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    fetchAttendance();\n  }, []);\n  const fetchAttendance = async () => {\n    try {\n      const user = JSON.parse(localStorage.getItem('currentUser'));\n      const response = await axios.get(`http://localhost:8080/api/attendance/${user.loginEmployee._id}`);\n      setAttendance(response.data);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching attendance:', error);\n      setLoading(false);\n    }\n  };\n  const columns = [{\n    title: 'Date',\n    dataIndex: 'date',\n    key: 'date',\n    render: text => new Date(text).toLocaleDateString()\n  }, {\n    title: 'Time',\n    dataIndex: 'date',\n    key: 'time',\n    render: text => new Date(text).toLocaleTimeString()\n  }];\n  const handleDownloadPDF = () => {\n    const doc = new jsPDF();\n    doc.autoTable({\n      head: [['Date', 'Time']],\n      body: attendance.map(record => [new Date(record.date).toLocaleDateString(), new Date(record.date).toLocaleTimeString()])\n    });\n    doc.save('attendance.pdf');\n  };\n  return /*#__PURE__*/_jsxDEV(ConfigProvider, {\n    theme: {\n      components: {\n        Button: {\n          colorPrimary: '#0071ff'\n        }\n      }\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"mb-4 text-2xl font-bold\",\n        children: \"Attendance History\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleDownloadPDF,\n        className: \"mb-4 bg-[#0071ff] text-white hover:bg-[#005ad6]\",\n        children: \"Download PDF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Table, {\n        columns: columns,\n        dataSource: attendance,\n        loading: loading,\n        rowKey: \"_id\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n_s(AttendanceHistory, \"pNesZvz9lijwOUzsAeFbfhAiK78=\");\n_c = AttendanceHistory;\nexport default AttendanceHistory;\nvar _c;\n$RefreshReg$(_c, \"AttendanceHistory\");","map":{"version":3,"names":["React","useState","useEffect","Table","Button","ConfigProvider","axios","jsPDF","jsxDEV","_jsxDEV","AttendanceHistory","_s","attendance","setAttendance","loading","setLoading","fetchAttendance","user","JSON","parse","localStorage","getItem","response","get","loginEmployee","_id","data","error","console","columns","title","dataIndex","key","render","text","Date","toLocaleDateString","toLocaleTimeString","handleDownloadPDF","doc","autoTable","head","body","map","record","date","save","theme","components","colorPrimary","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","dataSource","rowKey","_c","$RefreshReg$"],"sources":["C:/Users/dulas/Desktop/Transport-Management-System/frontend/src/modules/components/AttendanceHistory.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Table, Button, ConfigProvider } from 'antd';\nimport axios from 'axios';\nimport { jsPDF } from 'jspdf';\nimport 'jspdf-autotable';\n\nconst AttendanceHistory = () => {\n    const [attendance, setAttendance] = useState([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        fetchAttendance();\n    }, []);\n\n    const fetchAttendance = async () => {\n        try {\n            const user = JSON.parse(localStorage.getItem('currentUser'));\n            const response = await axios.get(`http://localhost:8080/api/attendance/${user.loginEmployee._id}`);\n            setAttendance(response.data);\n            setLoading(false);\n        } catch (error) {\n            console.error('Error fetching attendance:', error);\n            setLoading(false);\n        }\n    };\n\n    const columns = [\n        {\n            title: 'Date',\n            dataIndex: 'date',\n            key: 'date',\n            render: (text) => new Date(text).toLocaleDateString(),\n        },\n        {\n            title: 'Time',\n            dataIndex: 'date',\n            key: 'time',\n            render: (text) => new Date(text).toLocaleTimeString(),\n        },\n    ];\n\n    const handleDownloadPDF = () => {\n        const doc = new jsPDF();\n        doc.autoTable({\n            head: [['Date', 'Time']],\n            body: attendance.map(record => [\n                new Date(record.date).toLocaleDateString(),\n                new Date(record.date).toLocaleTimeString()\n            ]),\n        });\n        doc.save('attendance.pdf');\n    };\n\n    return (\n        <ConfigProvider\n            theme={{\n                components: {\n                    Button: {\n                        colorPrimary: '#0071ff',\n                    },\n                },\n            }}\n        >\n            <div className=\"p-5\">\n                <h2 className=\"mb-4 text-2xl font-bold\">Attendance History</h2>\n                <Button\n                    onClick={handleDownloadPDF}\n                    className=\"mb-4 bg-[#0071ff] text-white hover:bg-[#005ad6]\"\n                >\n                    Download PDF\n                </Button>\n                <Table\n                    columns={columns}\n                    dataSource={attendance}\n                    loading={loading}\n                    rowKey=\"_id\"\n                />\n            </div>\n        </ConfigProvider>\n    );\n};\n\nexport default AttendanceHistory;\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}